---
title: "workspace"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
  library(ggplot2)
  library(extracat)
  library(tidyverse)
```

```{r}
load('pbp2019.rda')
pbp2019[pbp2019=='null']<- NA
head(pbp2019,5)
colSums(is.na(pbp2019)) %>% sort(decreasing=TRUE)
tidy_data <- pbp2019 %>% gather(key='row',value = 'value', -sv_id) %>% mutate(missing= ifelse(is.na(value),'yes','no'))
colMeans(is.na(pbp2019))

drop <- c('spin_dir', 'spin_rate_deprecated','break_angle_deprecated','break_length_deprecated','tfs_deprecated','tfs_zulu_deprecated','umpire')
pbp2019 <- pbp2019[,!(names(pbp2019) %in% drop)]
head(pbp2019)
extracat::visna(pbp2019)
```